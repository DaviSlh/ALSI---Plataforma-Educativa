<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ALSI - Plataforma Educativa</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      display: flex;
      height: 100vh;
      background-color: #f9f6fb;
      color: #4a3054;
    }
    aside {
      width: 220px;
      background-color: #c39bd3;
      padding: 2rem 1rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      color: white;
      align-items: center;
    }
    aside img {
      width: 130px;
      height: auto;
      margin-bottom: 1.5rem;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    aside h1 {
      font-size: 1.8rem;
      margin-bottom: 2rem;
      text-align: center;
    }
    aside button {
      background: none;
      border: none;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      padding: 0.5rem;
      text-align: left;
      width: 100%;
      transition: background 0.3s;
    }
    aside button:hover {
      background-color: #af7ac5;
      border-radius: 8px;
    }
    main {
      flex: 1;
      padding: 2rem;
      overflow-y: auto;
      position: relative;
    }
    .progress-bar-container {
      background-color: #e8dff3;
      height: 6px;
      width: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }
    .progress-bar-fill {
      background-color: #b27ac5;
      height: 100%;
      width: 0%;
      transition: width 0.6s ease;
    }
    .search-container {
      margin: 1.5rem 0;
    }
    .search-container input {
      width: 100%;
      padding: 0.6rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
    }
    .lessons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }
    .lesson-card {
      background: #fff;
      border-radius: 1rem;
      padding: 1.5rem;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
      text-align: center;
      position: relative;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    .lesson-card:hover {
      transform: scale(1.02);
    }
    .lesson-card h3 { margin: 0 0 0.5rem; }
    .lesson-card p { font-size: 0.9rem; color: #555; margin-bottom: 1rem; }
    .lesson-card button {
      background-color: #c39bd3;
      color: #fff;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 0.5rem;
      cursor: pointer;
      font-weight: bold;
    }
    .lesson-card.completed {
      border: 2px solid #af7ac5;
    }
    .lesson-card .check {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 1.5rem;
      color: #28a745;
    }
    #perfil form {
      max-width: 400px;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    #perfil input {
      padding: 0.6rem;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    #perfil button {
      width: fit-content;
      background-color: #c39bd3;
      color: white;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      cursor: pointer;
    }
    .logo-movil {
      display: none;
    }
    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      aside {
        width: 100%;
        flex-direction: row;
        justify-content: space-around;
        padding: 1rem;
        position: sticky;
        top: 0;
        z-index: 1000;
      }
      aside img,
      aside h1 {
        display: none;
      }
      aside button {
        flex: 1;
        font-size: 0.9rem;
        padding: 0.5rem;
      }
      main {
        padding: 1rem;
      }
      .lessons {
        grid-template-columns: 1fr;
      }
      .lesson-card {
        padding: 1rem;
      }
      .logo-movil {
        display: block;
        position: fixed;
        top: 10px;
        right: 10px;
        width: 50px;
        height: auto;
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1001;
      }
    }
    /* Modo oscuro */
    body.dark-mode {
      background-color: #121212;
      color: #e0d8f0;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    body.dark-mode aside {
      background-color: #3a2a52;
      color: #dcd6f7;
    }
    body.dark-mode aside button {
      color: #dcd6f7;
    }
    body.dark-mode aside button:hover {
      background-color: #6b5498;
    }
    body.dark-mode main {
      background-color: #1e1b29;
      color: #e0d8f0;
    }
    body.dark-mode .lesson-card {
      background-color: #2b2440;
      color: #ddd;
      box-shadow: 0 6px 16px rgba(255, 255, 255, 0.1);
    }
    body.dark-mode .lesson-card button {
      background-color: #6b5498;
      color: #fff;
    }
    body.dark-mode .lesson-card.completed {
      border-color: #a87ce2;
    }
    body.dark-mode .progress-bar-container {
      background-color: #4e3f70;
    }
    body.dark-mode .progress-bar-fill {
      background-color: #a87ce2;
    }
    body.dark-mode #perfilResumen {
      background-color: #3a2a52;
      color: #e0d8f0;
    }
    body.dark-mode #perfil input {
      background-color: #4e3f70;
      color: #ddd;
      border-color: #6b5498;
    }
    body.dark-mode #perfil button {
      background-color: #6b5498;
      color: white;
    }
    body.dark-mode .search-container input {
      background-color: #4e3f70;
      color: #ddd;
      border-color: #6b5498;
    }
    body.dark-mode {
      background-color: #1e1e2f;  /* Fondo oscuro */
      color: #ffffff;             /* Letras blancas */
    }
    body.dark-mode h1,
    body.dark-mode h2,
    body.dark-mode h3,
    body.dark-mode p,
    body.dark-mode span,
    body.dark-mode li,
    body.dark-mode input,
    body.dark-mode button,
    body.dark-mode label {
      color: #ffffff;
    }
  </style>
</head>
<body>
  <img class="logo-movil" src="https://i.postimg.cc/gktsPS9Z/1000040884.png" alt="Logo ALSI móvil" />
  <aside>
    <img src="https://i.postimg.cc/gktsPS9Z/1000040884.png" alt="Logo ALSI" />
    <h1>ALSI</h1>
    <button onclick="showSection('lecciones')">Lecciones</button>
    <button onclick="showSection('progreso')">Progreso</button>
    <button onclick="showSection('perfil')">Perfil</button>
   <button type="button" onclick="cerrarSesion()">Salir</button>
   <button id="toggle-dark-mode" type="button">🌙 Modo Oscuro</button>
  </aside>
  <main>
    <div class="progress-bar-container">
      <div class="progress-bar-fill" id="progressFill"></div>
    </div>

    <section id="lecciones">
      <h2>Elige una lección para comenzar</h2>
      <div class="search-container">
        <input type="text" id="busqueda" placeholder="Buscar lección..." oninput="filtrarLecciones()" />
      </div>
      <div class="lessons" id="lessons-container">
        <div class="lesson-card" data-leccion-id="1" data-titulo="Lección 1">
          <img src="TP1/leccion1.png" alt="Lección 1" style="width:100%;border-radius:12px;margin-bottom:1rem;">
          <h3>Lección 1</h3>
          <p>Introducción a las señas básicas.</p>
          <button type="button" onclick="event.stopPropagation(); marcarCompletada(1)">Marcar como completada</button>
        </div>

        <div class="lesson-card" data-leccion-id="2" data-titulo="Lección 2">
          <img src="img/leccion2.png" alt="Lección 2" style="width:100%;border-radius:12px;margin-bottom:1rem;">
          <h3>Lección 2</h3>
          <p>Abecedario dactilológico.</p>
          <button type="button" onclick="event.stopPropagation(); marcarCompletada(2)">Marcar como completada</button>
        </div>

        <div class="lesson-card" data-leccion-id="3" data-titulo="Lección 3">
          <img src="img/leccion3.png" alt="Lección 3" style="width:100%;border-radius:12px;margin-bottom:1rem;">
          <h3>Lección 3</h3>
          <p>Colores y números.</p>
          <button type="button" onclick="event.stopPropagation(); marcarCompletada(3)">Marcar como completada</button>
        </div>

        <div class="lesson-card" data-leccion-id="4" data-titulo="Lección 4">
          <img src="img/leccion4.png" alt="Lección 4" style="width:100%;border-radius:12px;margin-bottom:1rem;">
          <h3>Lección 4</h3>
          <p>Días de la semana y tiempo.</p>
          <button type="button" onclick="event.stopPropagation(); marcarCompletada(4)">Marcar como completada</button>
        </div>
        </div>
    </section>

    <section id="progreso" style="display:none">
      <h2>Progreso del usuario</h2>
      <ul id="lista-progreso"></ul>
      <button type="button" onclick="reiniciarProgreso()" style="margin-top: 1rem; background-color: #e74c3c; color: white; border: none; padding: 0.6rem 1.2rem; border-radius: 8px; cursor: pointer;">
        Reiniciar progreso
      </button>
    </section>

    <section id="perfil" style="display:none">
      <h2>Perfil del usuario</h2>
      <form onsubmit="guardarPerfil(event)" id="form-perfil">
        <input type="text" id="nombre" placeholder="Nombre" />
        <input type="email" id="correo" placeholder="Correo electrónico" />
       <button type="submit">Guardar perfil</button>
      </form>
    <div id="contenido-leccion"></div>
  </main>

 <script>
  let completadas = JSON.parse(localStorage.getItem('leccionesCompletadas')) || [];

  // Al cargar la página, se inicializan las tarjetas según el progreso guardado
  document.addEventListener('DOMContentLoaded', () => {
    actualizarEstadoLecciones();
  });

  function actualizarEstadoLecciones() {
    const cards = document.querySelectorAll('.lesson-card');
    cards.forEach(card => {
      const leccionId = parseInt(card.dataset.leccionId);
      const isCompleted = completadas.includes(leccionId);
      const isFirstLesson = leccionId === 1;
      const prevLessonId = leccionId - 1;
      const isPrevCompleted = completadas.includes(prevLessonId);

      // Limpia clases y elementos anteriores para evitar duplicados
      card.classList.remove('completed');
      const existingCheck = card.querySelector('.check');
      if (existingCheck) {
        existingCheck.remove();
      }
      const existingUnlockMessage = card.querySelector('.unlock-message');
      if (existingUnlockMessage) {
        existingUnlockMessage.remove();
      }
      card.style.opacity = "1";
      card.style.pointerEvents = "auto";
      card.onclick = () => cargarLeccion(leccionId); // Restablecer el click event

      if (isCompleted) {
        card.classList.add('completed');
        card.innerHTML += '<span class="check">✅</span>';
      }

      // Lógica de desbloqueo: la primera lección o si la anterior está completada
      const desbloqueada = isFirstLesson || isPrevCompleted;

      if (!desbloqueada && !isCompleted) { // Si no está desbloqueada y no está completada
        card.style.opacity = "0.5";
        card.style.pointerEvents = "none";
        card.onclick = null; // Desactivar el click
        card.innerHTML += `<p class="unlock-message" style="color:#999;font-size:0.9rem;">Completa la anterior para desbloquear</p>`;
      }
    });
  }

  function filtrarLecciones() {
    const texto = document.getElementById('busqueda').value.toLowerCase();
    const cards = document.querySelectorAll('.lesson-card');
    cards.forEach(card => {
      const titulo = card.dataset.titulo.toLowerCase();
      card.style.display = titulo.includes(texto) ? "block" : "none";
    });
  }

  function marcarCompletada(leccionId) {
    if (!completadas.includes(leccionId)) {
      completadas.push(leccionId);
      localStorage.setItem('leccionesCompletadas', JSON.stringify(completadas));
      actualizarEstadoLecciones(); // Actualizar el estado de todas las tarjetas
    }
  }

  function cargarLeccion(i) {
    window.location.href = `lesson${i}.html`;
  }

  const toggleDarkModeBtn = document.getElementById('toggle-dark-mode');
  const body = document.body;

  // Al cargar la página, revisamos si hay preferencia guardada
  if (localStorage.getItem('darkMode') === 'enabled') {
    body.classList.add('dark-mode');
    toggleDarkModeBtn.textContent = '☀️ Modo Claro';
  }

  toggleDarkModeBtn.addEventListener('click', () => {
    body.classList.toggle('dark-mode');
    if (body.classList.contains('dark-mode')) {
      toggleDarkModeBtn.textContent = '☀️ Modo Claro';
      localStorage.setItem('darkMode', 'enabled');
    } else {
      toggleDarkModeBtn.textContent = '🌙 Modo Oscuro';
      localStorage.setItem('darkMode', 'disabled');
    }
  });

  function showSection(id) {
    const secciones = ['lecciones', 'progreso', 'perfil'];
    secciones.forEach(sec => {
      document.getElementById(sec).style.display = sec === id ? 'block' : 'none';
    });
  }

  function guardarPerfil(event) {
    event.preventDefault();
    const nombre = document.getElementById('nombre').value;
    const correo = document.getElementById('correo').value;

    const perfil = { nombre, correo };
    localStorage.setItem('perfilUsuario', JSON.stringify(perfil));

    // Si tuvieras una sección para mostrar el resumen del perfil, la llamarías aquí.
    // Por ejemplo: mostrarResumenPerfil();
    alert('Perfil guardado exitosamente!');
  }

  function reiniciarProgreso() {
    if (confirm('¿Estás seguro de que quieres reiniciar tu progreso? Se borrarán todas las lecciones completadas.')) {
      localStorage.removeItem('leccionesCompletadas');
      completadas = [];
      actualizarEstadoLecciones();
      alert('Tu progreso ha sido reiniciado.');
    }
  }

  function cerrarSesion() {
  
    alert('Sesión cerrada.');
 
</script>
</body>
</html>
